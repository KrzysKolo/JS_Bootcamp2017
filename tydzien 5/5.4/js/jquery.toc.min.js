!function(a,b,c,d){a.fn.toc=function(b){var c={heading:"h2",tocClass:"toc",tocHeading:"h2",tocTitle:"Table of contents:",blink:!1},d=a.extend({},c,b),e=this.children(d.heading),f=[],g=[];e.each(function(b,c){a(this).before("<a name='toc-item-"+(b+1)+"'></a>"),f[b]="<li><a goto='"+b+"' href='#toc-item-"+(b+1)+"'>"+a(this).text()+"</a></li>",g[b]=this.offsetTop});var h=a("<ol>",{html:f.join("")}),i=a("<"+d.tocHeading+">"+d.tocTitle+"</"+d.tocHeading+">"),j=a("<div>",{class:d.tocClass,html:i[0],append:h});return this.first().before(j),e.each(function(a,b){g[a]=this.offsetTop}),a("."+d.tocClass+" a").click(function(b){b.preventDefault();var c=a(this);a("body").stop().animate({scrollTop:g[a(this).attr("goto")]-15},800,"swing",function(){if(d.blink){var b=e[c.attr("goto")];a(b).delay().animate({opacity:.3},450).animate({opacity:1},250)}})}),this}}(jQuery,window,document);
